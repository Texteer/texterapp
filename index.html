-- messages table
create table if not exists public.messages (
  id bigint generated by default as identity primary key,
  username text,
  message text,
  sender_email text,
  created_at timestamptz default now()
);

-- dm_messages table
create table if not exists public.dm_messages (
  id bigint generated by default as identity primary key,
  sender_email text,
  receiver_email text,
  content text,
  created_at timestamptz default now()
);

-- users table (email + username)
create table if not exists public.users (
  id uuid primary key default uuid_generate_v4(),
  email text unique not null,
  username text unique,
  role text default 'user',
  created_at timestamptz default now()
);

-- friends table (requests + status)
create table if not exists public.friends (
  id bigint generated by default as identity primary key,
  requester_email text not null,
  addressee_email text not null,
  status text not null default 'pending',
  created_at timestamptz default now()
);
